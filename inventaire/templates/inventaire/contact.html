{% extends 'inventaire/base.html' %}
{% load widget_tweaks %}

{% block title %}Nous contacter - {{ block.super }}{% endblock %}

{% block header %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'inventaire:accueil' %}">Accueil</a></li>
        <li class="breadcrumb-item active" aria-current="page">Contact</li>
    </ol>
</nav>

<div class="d-flex justify-content-between align-items-center">
    <h1 class="mb-0">
        <i class="fas fa-envelope me-2"></i>Nous contacter
    </h1>
    <a href="{% url 'inventaire:accueil' %}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-1"></i> Retour
    </a>
</div>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-body">
                <div class="mb-4">
                    <h5 class="card-title">Envoyez-nous un message</h5>
                    <p class="text-muted">
                        Notre équipe est à votre écoute pour répondre à vos questions ou préoccupations.
                        Nous nous efforçons de répondre à toutes les demandes dans les plus brefs délais.
                    </p>
                </div>

                {% if messages %}
                    {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fermer"></button>
                    </div>
                    {% endfor %}
                {% endif %}

                <form method="post" class="needs-validation" novalidate>
                    {% csrf_token %}
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.nom.id_for_label }}" class="form-label">
                                    Nom <span class="text-danger">*</span>
                                </label>
                                {% if form.nom.errors %}
                                    {{ form.nom|add_class:"form-control is-invalid" }}
                                    <div class="invalid-feedback">
                                        {{ form.nom.errors.0 }}
                                    </div>
                                {% else %}
                                    {{ form.nom|add_class:"form-control" }}
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.email.id_for_label }}" class="form-label">
                                    Email <span class="text-danger">*</span>
                                </label>
                                {% if form.email.errors %}
                                    {{ form.email|add_class:"form-control is-invalid" }}
                                    <div class="invalid-feedback">
                                        {{ form.email.errors.0 }}
                                    </div>
                                {% else %}
                                    {{ form.email|add_class:"form-control" }}
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="{{ form.sujet.id_for_label }}" class="form-label">
                            Sujet <span class="text-danger">*</span>
                        </label>
                        {% if form.sujet.errors %}
                            {{ form.sujet|add_class:"form-control is-invalid" }}
                            <div class="invalid-feedback">
                                {{ form.sujet.errors.0 }}
                            </div>
                        {% else %}
                            {{ form.sujet|add_class:"form-select" }}
                        {% endif %}
                    </div>

                    <div class="mb-4">
                        <label for="{{ form.message.id_for_label }}" class="form-label">
                            Message <span class="text-danger">*</span>
                        </label>
                        {% if form.message.errors %}
                            {{ form.message|add_class:"form-control is-invalid"|attr:"rows:6" }}
                            <div class="invalid-feedback">
                                {{ form.message.errors.0 }}
                            </div>
                        {% else %}
                            {{ form.message|add_class:"form-control"|attr:"rows:6" }}
                        {% endif %}
                        <div class="form-text">
                            Décrivez-nous votre demande en détail. Nous ferons de notre mieux pour vous répondre dans les plus brefs délais.
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-paper-plane me-2"></i>Envoyer le message
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 mt-4 mt-lg-0">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title mb-4">Coordonnées</h5>
                
                <div class="d-flex mb-4">
                    <div class="flex-shrink-0">
                        <div class="icon-md bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h6 class="mb-1">Adresse</h6>
                        <p class="mb-0 text-muted">
                            123 Rue de l'Exemple<br>
                            75000 Paris, France
                        </p>
                    </div>
                </div>
                
                <div class="d-flex mb-4">
                    <div class="flex-shrink-0">
                        <div class="icon-md bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center">
                            <i class="fas fa-phone"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h6 class="mb-1">Téléphone</h6>
                        <p class="mb-0">
                            <a href="tel:+33123456789" class="text-decoration-none">
                                +33 1 23 45 67 89
                            </a>
                        </p>
                    </div>
                </div>
                
                <div class="d-flex mb-4">
                    <div class="flex-shrink-0">
                        <div class="icon-md bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center">
                            <i class="fas fa-envelope"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h6 class="mb-1">Email</h6>
                        <p class="mb-0">
                            <a href="mailto:contact@votresociete.com" class="text-decoration-none">
                                contact@votresociete.com
                            </a>
                        </p>
                    </div>
                </div>
                
                <div class="d-flex">
                    <div class="flex-shrink-0">
                        <div class="icon-md bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h6 class="mb-1">Horaires d'ouverture</h6>
                        <ul class="list-unstyled text-muted mb-0">
                            <li>Lun - Ven: 9h00 - 18h00</li>
                            <li>Sam: 9h00 - 12h00</li>
                            <li>Dim: Fermé</li>
                        </ul>
                    </div>
                </div>
                
                <hr class="my-4">
                
                <h6 class="mb-3">Suivez-nous</h6>
                <div class="d-flex gap-2">
                    <a href="#" class="btn btn-outline-primary btn-icon rounded-circle" data-bs-toggle="tooltip" title="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="btn btn-outline-primary btn-icon rounded-circle" data-bs-toggle="tooltip" title="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="btn btn-outline-primary btn-icon rounded-circle" data-bs-toggle="tooltip" title="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="#" class="btn btn-outline-primary btn-icon rounded-circle" data-bs-toggle="tooltip" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title mb-3">Questions fréquentes</h5>
                <div class="accordion" id="faqAccordion">
                    <div class="accordion-item border-0 mb-2">
                        <h6 class="accordion-header" id="headingOne">
                            <button class="accordion-button bg-light rounded-3 p-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Comment puis-je suivre ma commande ?
                            </button>
                        </h6>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                            <div class="accordion-body pt-0">
                                <p class="small mb-0">
                                    Vous pouvez suivre votre commande en vous connectant à votre compte et en consultant la section "Mes commandes". 
                                    Vous recevrez également des mises à jour par email.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item border-0 mb-2">
                        <h6 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed bg-light rounded-3 p-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                Quelles sont les options de paiement disponibles ?
                            </button>
                        </h6>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                            <div class="accordion-body pt-0">
                                <p class="small mb-0">
                                    Nous acceptons les cartes de crédit (Visa, Mastercard, American Express), PayPal et les virements bancaires. 
                                    Tous les paiements sont sécurisés et cryptés.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item border-0">
                        <h6 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed bg-light rounded-3 p-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                Quelle est votre politique de retour ?
                            </button>
                        </h6>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                            <div class="accordion-body pt-0">
                                <p class="small mb-0">
                                    Vous pouvez retourner les articles dans les 30 jours suivant la réception pour un remboursement intégral. 
                                    Les articles doivent être en parfait état, dans leur emballage d'origine et accompagnés du bon de retour.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-3 text-center">
                    <a href="#" class="btn btn-link p-0 text-decoration-none small">
                        Voir toutes les questions fréquentes <i class="fas fa-arrow-right ms-1 small"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Carte Google Maps -->
<div class="card mt-4">
    <div class="card-body p-0">
        <div class="ratio ratio-21x9">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2624.9916256937595!2d2.29229261580728!3d48.8583700792875!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47e66e2964e34e2d%3A0x8ddca9ee380ef7e0!2sTour%20Eiffel!5e0!3m2!1sfr!2sfr!4v1620000000000!5m2!1sfr!2sfr" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy">
            </iframe>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialisation des tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Validation du formulaire
    var forms = document.querySelectorAll('.needs-validation');
    Array.prototype.slice.call(forms).forEach(function(form) {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        }, false);
    });
});
</script>
{% endblock %}
